(this["webpackJsonpfe-nc-news"]=this["webpackJsonpfe-nc-news"]||[]).push([[0],{28:function(e,t,a){e.exports=a(62)},33:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),o=(a(33),a(1)),s=a(2),i=a(4),m=a(3),u=a(5),h=a(7),p=function(e){var t=e.username;return r.a.createElement("div",null,r.a.createElement(h.a,{to:"/"},r.a.createElement("h1",null,"NC News")),r.a.createElement("h5",null,"Logged In As: ",r.a.createElement(h.a,{to:"/users"},t)))},d=a(9),v=a.n(d),b=function(e){return v.a.get("https://nc-news2020.herokuapp.com/api/".concat(e)).then((function(e){return e.data}))},f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={allTopics:[]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;b("topics/").then((function(t){var a=t.topics.map((function(e){return e}));e.setState({allTopics:a})}))}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar navbar-dark bg-dark"},r.a.createElement(h.a,{className:"navbar-brand",to:"/"},"NC News"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(h.a,{className:"nav-item nav-link active",to:"/users"},"LOGIN"),this.state.allTopics.map((function(e,t){return r.a.createElement(h.a,{className:"nav-item nav-link active",to:"/topics/".concat(e.slug),key:t},e.slug.toUpperCase())})),")")))}}]),t}(n.Component),E=(a(60),function(e,t,a){return v.a.patch("https://nc-news2020.herokuapp.com/api/".concat(a,"/").concat(e),{inc_votes:t}).then((function(e){return e.data}))}),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={currentVote:0,voteValue:0},a.handleVote=function(e){a.setState((function(t){return{currentVote:t.currentVote+e,voteValue:t.voteValue+e}}));var t=a.props,n=t.path,r=t.id;E(r,e,n)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.currentVote;this.setState({currentVote:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h5",null,"Votes: ",this.state.currentVote),this.state.voteValue<=0&&r.a.createElement("button",{onClick:function(t){return e.handleVote(1)},type:"button",className:"btn btn-outline-info"},"Up Vote ",r.a.createElement("span",{role:"img"},"\ud83d\udc4d")),this.state.voteValue>=0&&r.a.createElement("button",{onClick:function(t){return e.handleVote(-1)},type:"button",className:"btn btn-outline-danger"},"Down Vote ",r.a.createElement("span",{role:"img"},"\ud83d\udc4e")),r.a.createElement("br",null))}}]),t}(n.Component),y=function(e){var t=e.allArticles;if(t)return t.map((function(e){return r.a.createElement("main",{key:e.article_id},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h3",null,r.a.createElement(h.a,{to:"/articles/".concat(e.article_id)},e.title)),r.a.createElement("h6",null,"-By ",e.author),r.a.createElement("h5",null,r.a.createElement(h.a,{to:"/topics/".concat(e.topic)},e.topic)),r.a.createElement("h5",null,"Comments ",e.comment_count),r.a.createElement(g,{id:e.article_id,currentVote:e.votes,path:"articles"}))))}))},j=function(e){var t=e.msg;return r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("strong",null,"Loading!")," ",t&&r.a.createElement("h4",null,t))},k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={allArticles:[],loading:!0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.topic?b("articles/?topic=".concat(this.props.topic)).then((function(t){var a=t.articles.map((function(e){return e}));e.setState({allArticles:a})})).then((function(){e.setState({loading:!1})})):b("articles/").then((function(t){var a=t.articles.map((function(e){return e}));e.setState({allArticles:a})})).then((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){return r.a.createElement("article",null,this.state.loading&&r.a.createElement(j,{msg:"One tick just getting you the articles"}),r.a.createElement(y,{allArticles:this.state.allArticles,currentUser:this.props.currentUser}))}}]),t}(n.Component),C=function(e,t,a){return v.a.post("https://nc-news2020.herokuapp.com/api/articles/".concat(e,"/comments"),{username:"cooljmessy",body:t}).then((function(e){return e.data}))},O=function(e){var t=e.msg;return r.a.createElement("div",{className:"alert alert-success",role:"alert"},r.a.createElement("h3",null,t))},S=function(e){var t=e.err_msg;return r.a.createElement("div",{class:"alert alert-danger",role:"alert"},t?r.a.createElement("h3",null,t):r.a.createElement("h3",null,"Page not found... ",r.a.createElement("span",{"aria-labelrole":"img"},"\ud83d\udca9")))},_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={bodyInput:"",postedComment:null,posting:null,err:null},a.handleChange=function(e){a.setState({bodyInput:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.setState({posting:!0,bodyInput:""});var t=a.state.bodyInput,n=a.props.article_id;t?C(n,t).then((function(e){a.setState({postedComment:e,posting:null,err:null})})).catch((function(e){a.setState({err:e,posting:null})})):a.setState({err:"Empty comments are not allowed \ud83d\ude45\u200d\u2640\ufe0f",posting:null})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.err,a=e.postedComment,n=e.posting,c=e.bodyInput;return r.a.createElement("ul",null,t&&r.a.createElement(S,{err_msg:t}),a&&r.a.createElement(O,{msg:'"'.concat(a.comment.body,'" has been posted!')}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{placeholder:"Write a comment \ud83d\udd25",type:"text",onChange:this.handleChange,value:c,id:"comment",className:"form-control",rows:"3"})),!n&&r.a.createElement("button",{className:"btn btn-outline-success"},"Add Comment \u25b6\ufe0e")))}}]),t}(n.Component),w=function(e){return v.a.delete("https://nc-news2020.herokuapp.com/api/".concat(e)).then((function(e){return e.data}))},N=a(64),D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],sortBy:"created_at",loading:!0,err:!1,err_msg:"",deletingComment:!1,commentDeleted:!1},a.handleSortByByChange=function(e){var t=e.target.value;a.setState({sortBy:t})},a.handleDeleteComment=function(e){a.setState({commentDeleted:!1,deletingComment:!0}),w("comments/".concat(e)).then((function(){a.setState({commentDeleted:!0,deletingComment:!1})})).catch((function(){a.setState({loading:!1,err:!0,err_msg:"The comment you trying to delete is no longer exist \ud83d\ude45\u200d\u2640\ufe0f"})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.article_id;b("articles/".concat(t,"/comments")).then((function(t){e.setState({comments:t,loading:!1})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.article_id;e.article_id!==n&&b("articles/".concat(n,"/comments?sort_by=").concat(this.state.sortBy)).then((function(e){a.setState({comments:e})}))}},{key:"render",value:function(){var e=this,t=this.state.comments.comments;return t?this.state.err?r.a.createElement(S,{err_msg:this.state.err_msg}):r.a.createElement(r.a.Fragment,null,this.state.commentDeleted&&r.a.createElement(O,{msg:"The comment has been deleted! \ud83d\udca5"}),r.a.createElement("form",null,r.a.createElement("label",null,"Sort comments by:",r.a.createElement("select",{value:this.state.value,onChange:this.handleSortByByChange},r.a.createElement("option",{value:"created_at"},"Date Created"),r.a.createElement("option",{value:"username"},"Author"),r.a.createElement("option",{value:"votes"}," Comment Votes")))),t.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:"text-center"},r.a.createElement(N.a.Header,null,r.a.createElement("h5",null,t.username),r.a.createElement("p",null,r.a.createElement("small",null,t.created_at))),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Text,null,r.a.createElement("h6",null,t.body)),r.a.createElement(g,{id:t.comment_id,currentVote:t.votes,path:"comments"}),r.a.createElement("br",null)),r.a.createElement(N.a.Footer,{className:"text-muted"},!e.state.deletingComment&&e.props.currentUser===t.username&&r.a.createElement("button",{className:"btn btn-outline-warning",onClick:function(a){return e.handleDeleteComment(t.comment_id)}},"Delete Comment "))))}))):r.a.createElement(j,{msg:"Cool comments are on their way!"})}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={article:"",loading:!0,err_msg:"",commentsDisplayed:!1},a.handleShowComments=function(){var e=a.state.commentsDisplayed;a.setState({commentsDisplayed:!e})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.article_id;b("articles/".concat(t)).then((function(t){var a=t.article;e.setState({article:a,loading:!1})})).catch((function(){e.setState({err_msg:"oops this article dose not exist \ud83d\udca9 404"})}))}},{key:"render",value:function(){var e=this.state,t=e.article,a=e.err_msg;return t?r.a.createElement("div",{class:"card text-center"},r.a.createElement("div",{class:"card-header"},r.a.createElement("ul",{class:"nav nav-tabs card-header-tabs"})),r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title"},t.title),r.a.createElement("p",{class:"card-text"},t.body),r.a.createElement(g,{id:t.article_id,currentVote:t.votes,path:"articles"}),r.a.createElement("hr",null),r.a.createElement(_,{article_id:t.article_id}),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:this.handleShowComments},this.state.commentsDisplayed?"Hide Comments \ud83d\ude48":"Show ".concat(t.comment_count," comments \ud83d\udc40")),this.state.commentsDisplayed&&r.a.createElement(D,{article_id:t.article_id,currentUser:this.props.currentUser}))):a?r.a.createElement(S,{err_msg:a}):r.a.createElement(j,{err_msg:"Just getting you that amazing article"})}}]),t}(n.Component),V=(a(61),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={usersList:["cooljmessy","weegembump","happyamy2016","jessjelly","grumpy19","tickle122","happyamy2016"]},a.handleClick=function(e){a.props.pickedUser(e),localStorage.setItem("user",e)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.usersList.map((function(t,a){return r.a.createElement("div",{className:"card",key:a},r.a.createElement("div",{className:"card-header"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},t),r.a.createElement("a",{onClick:function(a){return e.handleClick(t)},className:"btn btn-outline-info"},"Login as ".concat(t))))}))}}]),t}(n.Component)),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"jessjelly"},a.setUsername=function(e){a.setState({username:e})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("user");e&&this.setState({username:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,{username:this.state.username}),r.a.createElement(f,null),r.a.createElement(h.b,{primary:!1},r.a.createElement(k,{path:"/"}),r.a.createElement(V,{path:"/users/",pickedUser:this.setUsername}),r.a.createElement(k,{path:"/articles/"}),r.a.createElement(k,{exact:!0,path:"/topics/:topic/"}),r.a.createElement(A,{path:"/articles/:article_id/",currentUser:this.state.username}),r.a.createElement(S,{default:!0})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.112e8503.chunk.js.map